(this.webpackJsonpjsgist=this.webpackJsonpjsgist||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=(n(75),n(91),n(92),document.createElement("div"));i.setAttribute("style","width:30px;height:30px;"),i.classList.add("scrollbar-test");var s=document.createElement("div");s.setAttribute("style","width:100%;height:40px"),i.appendChild(s),document.body.appendChild(i),30-i.firstChild.clientWidth&&document.body.classList.add("layout-scrollbar-obtrusive"),document.body.removeChild(i);var o=n(1),c=n.n(o),l=n(6),u=n(41),d=n(2),h=n(3),m=n(4),f=n(5),g=(n(34),n(76));Object(g.a)("storageManager");function p(e){return r.a.createElement("input",{type:"text",onChange:function(t){e.onChange(t.target.value)},placeholder:e.placeholder,value:e.value})}var v=n(7),b=n(77),y=(n(95),n(96),n(97),n(54),n(98),n(102),n(56),n(103),n(104),n(105),n(57),n(106),n(43),n(107),n(108),n(109),n(58),window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{}),S=function(){},w=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).registerEditor=function(e){a.editor=e};var r=e.value,i=e.hackKey;return a.state={value:r,hackKey:i},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.registerAPI;t&&t({goToLine:function(t,n){e.editor.focus(),e.editor.doc.setCursor(t-1,n-1)},refresh:function(t){e.editor.refresh()},focus:function(t){e.editor.focus()}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.options,a=void 0===n?{}:n,i=t.onValueChange,s=void 0===i?S:i,o=this.state.value,c=y.matches,l=Object(v.a)({mode:"javascript",scrollbarStyle:"overlay",theme:c?"material":"eclipse",matchBrackets:!0,lineNumbers:!0},a.editor&&a.editor);return l.mode.indexOf("html")>=0&&(l.matchTags=!0),r.a.createElement(b.Controlled,{value:o,options:l,onBeforeChange:function(t,n,a){e.setState({value:a})},onChange:function(e,t,n){s(n)},editorDidMount:this.registerEditor})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.hackKey!==e.hackKey?{hackKey:e.hackKey,value:e.value}:null}}]),n}(r.a.Component);var E=r.a.createContext(),j=n(11);function k(e,t){for(var n=new URL(e),a=new URLSearchParams(n.search),r=0,i=Object.entries(t);r<i.length;r++){var s=Object(j.a)(i[r],2),o=s[0],c=s[1];void 0===c?a.delete(o):a.set(o,c)}return n.search=a.toString(),n.href}var z=n(15),O=new Map,C=new Map([[null,O]]);function x(e,t,n){M(e,t,n);var a=C.get(t);a||(a=new Map,C.set(t,a));var r=a.get(e);r||(r=[],a.set(e,r)),r.push(n)}function M(e,t,n){var a=C.get(t);if(a){var r=a.get(e);if(r){var i=r.indexOf(n);i>=0&&r.splice(i,1),0===r.length&&(a.delete(e),0===a.size&&t&&C.delete(t))}}}function N(e,t,n){var a=e.get(t);if(a){var r,i=Object(z.a)(a);try{for(i.s();!(r=i.n()).done;){(0,r.value)(n)}}catch(s){i.e(s)}finally{i.f()}return!0}return!1}window.addEventListener("message",(function(e){var t=e.data,n=t.type,a=t.data,r=C.get(e.source);r&&N(r,n,a)||N(O,n,a)}));var L="".concat(window.location.origin,"/gist-comments.js"),I=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleSendPreview=function(){var e=a.props.body;a.iframeRef.current.contentWindow.postMessage({type:"preview",data:{body:e}},"*")},a.handleResize=function(e){a.iframeRef.current.style.height="".concat(e.height,"px")},a.iframeRef=r.a.createRef(),a.show=e.show,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){x("sendPreview",this.iframeRef.current.contentWindow,this.handleSendPreview),x("resize",this.iframeRef.current.contentWindow,this.handleResize)}},{key:"componentDidUpdate",value:function(){this.props.show!==this.show&&(this.show=this.props.show,this.show&&this.handleSendPreview())}},{key:"componentWillUnmount",value:function(){M("sendPreview",this.iframeRef.current.contentWindow,this.handleSendPreview),M("resize",this.iframeRef.current.contentWindow,this.handleResize)}},{key:"render",value:function(){var e=k("https://jsgist.devcomments.org/gist-comments.html",{preview:!0,url:L});return r.a.createElement("iframe",{title:"comment-preview",ref:this.iframeRef,src:e})}}]),n}(r.a.Component),R=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onUserStatusChange=function(){a.forceUpdate()},a.onValueChange=function(e){a.setState({value:e})},a.handleOnChange=function(e){a.setState({tab:e})},a.handleSaveComment=Object(l.a)(c.a.mark((function e(){var t,n,r,i,s,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.context,n=t.github,r=t.addError,e.prev=1,i=a.props,s=i.gistId,o=i.addComment,e.next=5,n.createGistComment(s,a.state.value);case 5:l=e.sent,a.setState({value:"",previewKey:a.state.previewKey+1}),o(l),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r(e.t0.message||e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),a.state={value:"",tab:0,previewKey:1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.context.userManager.subscribe(this.onUserStatusChange)}},{key:"componentWillUnmount",value:function(){this.context.userManager.unsubscribe(this.onUserStatusChange)}},{key:"renderCommentForm",value:function(){var e=this,t=this.context.userManager.getUserData(),n=this.state,a=n.value,i=n.tab,s=n.previewKey,o=1===i;return r.a.createElement("div",{className:"new-comment"},r.a.createElement("div",{className:"new-comment-head"},!!t.login&&r.a.createElement("div",{className:"username"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(t.login)},t.login)),!!t.avatar_url&&r.a.createElement("a",{className:"user-avatar",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/".concat(t.login)},r.a.createElement("img",{className:"avatar",src:t.avatar_url,alt:"avatar"}))),r.a.createElement("div",{className:"new-comment-tabs"},r.a.createElement("input",{type:"radio",name:"new-comment",id:"write",checked:0===i,onChange:function(t){return e.handleOnChange(0)}}),r.a.createElement("label",{htmlFor:"write"},"write"),r.a.createElement("input",{type:"radio",name:"new-comment",id:"preview",checked:1===i,onChange:function(t){return e.handleOnChange(1)}}),r.a.createElement("label",{htmlFor:"preview"},"preview")),r.a.createElement("div",{className:"new-comment-content"},r.a.createElement("div",{style:Object(v.a)({},1===i&&{display:"none"}),className:"new-comment-write"},r.a.createElement(w,{hackKey:s,value:a,options:{editor:{mode:"gfm",lineNumbers:!1}},onValueChange:this.onValueChange,registerAPI:function(e){return e}})),r.a.createElement("div",{className:"new-comment-preview",style:Object(v.a)({},!o&&{display:"none"})},r.a.createElement(I,{key:s,body:a,show:o}))),r.a.createElement("div",{className:"new-comment-submit  "},r.a.createElement("button",{onClick:this.handleSaveComment},"Comment")))}},{key:"renderLogin",value:function(){var e=this.context.userManager;return r.a.createElement("div",{className:"new-comment"},r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"render",value:function(){return this.context.userManager.getUserData()?this.renderCommentForm():this.renderLogin()}}]),n}(r.a.Component);R.contextType=E;var T="".concat(window.location.origin,"/gist-comments.js"),U=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleResize=function(t){e.iframeRef.current.style.height="".concat(t.height,"px")},e.addComment=function(t){e.iframeRef.current.contentWindow.postMessage({type:"addComment",data:t},"*")},e.iframeRef=r.a.createRef(),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){x("resize",this.iframeRef.current.contentWindow,this.handleResize),this.props.registerAPI({addComment:this.addComment})}},{key:"componentWillUnmount",value:function(){M("resize",this.iframeRef.current.contentWindow,this.handleResize)}},{key:"shouldComponentUpdate",value:function(e){return e.disqusId!==this.disqusId}},{key:"render",value:function(){var e=this.context.userManager.getUserData()||{},t=this.props.gistId,n=k("https://jsgist.devcomments.org/gist-comments.html",{gist_id:t,url:T,gitUserId:e.id});return r.a.createElement("div",null,!!t&&r.a.createElement("iframe",{ref:this.iframeRef,title:"comments",src:n}))}}]),n}(r.a.Component);U.contextType=E;r.a.Component;var K=function(){function e(){Object(d.a)(this,e),this.itemToSubscriptionMap=void 0,this.itemToSubscriptionMap=new Map}return Object(h.a)(e,[{key:"subscribe",value:function(e,t){this.unsubscribe(e,t);var n=this.itemToSubscriptionMap.get(e);n||(n=[],this.itemToSubscriptionMap.set(e,n)),n.push(t)}},{key:"unsubscribe",value:function(e,t){var n=this.itemToSubscriptionMap.get(e);if(n){var a=n.indexOf(t);a>=0&&(n.splice(a,1),0===n.length&&this.itemToSubscriptionMap.delete(e))}}},{key:"notify",value:function(e){var t=this.itemToSubscriptionMap.get(e);if(t){var n,a=Object(z.a)(t.slice());try{for(a.s();!(n=a.n()).done;){(0,n.value)()}}catch(r){a.e(r)}finally{a.f()}}}}]),e}(),P=new(function(){function e(t){var n=this;Object(d.a)(this,e),this.prefix=void 0,this.subscriptionManager=void 0,this._handleNewValue=function(e){var t=e.key;if(t&&t.startsWith(n.prefix)){var a=t.substr(n.prefix.length);n.subscriptionManager.notify(a)}},this.prefix="".concat(t,"-"),this.subscriptionManager=new K,window.addEventListener("storage",this._handleNewValue)}return Object(h.a)(e,[{key:"_addPrefix",value:function(e){return"".concat(this.prefix).concat(e)}},{key:"subscribe",value:function(e,t){this.subscriptionManager.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){this.subscriptionManager.unsubscribe(e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._addPrefix(e);if(t){var a=sessionStorage.getItem(n);if(a)return a}return localStorage.getItem(n)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this._addPrefix(e);n&&sessionStorage.setItem(a,t),localStorage.setItem(a,t),this.subscriptionManager.notify(e)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._addPrefix(e);t&&sessionStorage.removeItem(n),localStorage.removeItem(n),this.subscriptionManager.notify(e)}},{key:"cleanup",value:function(){window.removeEventListener("storage",this._handleNewValue)}}]),e}())("jsgist"),A=n(19),D=n(51),G="/*bug-in-github-api-content-can-not-be-empty*/";function V(e){return e.content.startsWith(G)?e.content.substr(G.length):e.content}function F(e){var t=JSON.parse(e.files["jsGist.json"].content);return t.filenames?t.files=t.filenames.map((function(t){return{name:t,content:V(e.files[t])}})):t.files=Object.entries(e.files).filter((function(e){return"jsGist.json"!==Object(j.a)(e,1)[0]})).map((function(e){var t=Object(j.a)(e,2);return{name:t[0],content:V(t[1])}})).concat(t.files||[]),t}function J(e,t,n){var a=e.files.reduce((function(e,t){return e[t.name]={content:t.content.trim()?t.content:"".concat(G).concat(t.content)},e}),{}),r=Object(v.a)({},e),i={};if(a["jsGist.json"]=i,Object.keys(a).length===e.files.length+1?(delete r.files,r.filenames=e.files.map((function(e){return e.name}))):a={"jsGist.json":i},i.content=JSON.stringify(r),n){var s=Object.keys(a).map((function(e){return e.toLowerCase()}));if(!(s.includes("readme.md")||s.includes("readme.txt")||s.includes("readme"))){var o="## ".concat(e.name,"\n\n[view on jsgist](").concat(window.location.origin,"?src=").concat(n,")");a["README.md"]={content:o}}for(var c=0,l=Object.entries(a);c<l.length;c++){var u=Object(j.a)(l[c],2),d=u[0];u[1].filename=d}}return Object(v.a)(Object(v.a)({files:a,description:e.name},!n&&{public:!t}),n&&{gist_id:n})}EventTarget;r.a.Component;var W=n(14),_=n.n(W),H=n(13),q=n.n(H),B=n(80),$=(new _.a).compile(B),Y={};function Z(e){var t=Y[e]||{subscriptions:new Set};return Y[e]=t,t}function Q(e,t){var n=Z(e);return void 0!==t&&(n.value=t),n}function X(e){return Y[e].value}function ee(e,t){var n=Y[e];if(!n)throw new Error("no such track value: ".concat(e));n.value=t;var a,r=Object(u.a)(n.subscriptions.keys()),i=Object(z.a)(r);try{for(i.s();!(a=i.n()).done;){(0,a.value)(t,e)}}catch(s){i.e(s)}finally{i.f()}}function te(e,t){Z(e).subscriptions.add(t)}function ne(e,t){Z(e).subscriptions.delete(t)}var ae,re={name:"My jsGist",settings:{},files:[{name:"index.html",content:""},{name:"index.css",content:""},{name:"index.js",content:""}]};Q("dataVersion",0),Q("updateVersion",0),Q("filesVersion",0);var ie=function(e){return ee(e,X(e)+1)},se=function(e){return ie("dataVersion")},oe=function(e){return ie("filesVersion")};function ce(e,t){ae.files[e].name=t,se()}function le(e,t){ae.files[e].content=t,se()}function ue(e){!function(e){if(!$(e))throw new Error("data not valid:\n".concat($.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))))}(e),ae=e,ie("updateVersion"),se(),oe()}ue(JSON.parse(JSON.stringify(re)));var de=n(81),he=n.n(de),me=/([a-z])([A-Z])/g,fe=function(e,t,n){return"".concat(t,"-").concat(n)},ge=function(e){return e.replace(me,fe).toLowerCase()};function pe(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++){var s=i[r];if("string"===typeof s)e.push(s);else for(var o=0,c=Object.entries(s);o<c.length;o++){var l=Object(j.a)(c[o],2),u=l[0],d=l[1];d&&e.push(ge(u))}}return e.join(" ")}function ve(e){var t=e.value,n=e.hackKey,a=e.heading,i=e.extra,s=void 0===i?[]:i,o=e.options,c=void 0===o?{}:o,l=e.onValueChange,u=e.registerAPI;return r.a.createElement("div",{className:"code-area",style:e.style},r.a.createElement("div",{className:"expander"},a),r.a.createElement("div",{className:pe("hidee")},r.a.createElement(w,{hackKey:n,value:t,options:c,onValueChange:l,registerAPI:u}),s))}var be,ye=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleRegisterAPI=function(t){e.codeAPI=t},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.register)(this,{goToLine:function(t){var n=e.props.title;if(t.section===n)return e.codeAPI.goToLine(t.lineNo,t.colNo),!0},refresh:function(t){return e.codeAPI.refresh()},focus:function(t){return e.codeAPI.focus()}})}},{key:"componentWillUnmount",value:function(){(0,this.props.unregister)(this)}},{key:"render",value:function(){var e,t=this.props,n=t.title,a=t.hackKey,i=r.a.createElement("div",{style:{width:"100%"}},n),s=he.a.lookup(n)||("javascript"===n.toLowerCase()?"application/javascript":"application/octet-stream"),o=Object(v.a)(Object(v.a)({},t.options),{},{editor:Object(v.a)(Object(v.a)({},(null===(e=t.options)||void 0===e?void 0:e.editor)&&t.options.editor),{},{mode:s})});return r.a.createElement(ve,Object.assign({key:a},t,{options:o,heading:i,registerAPI:this.handleRegisterAPI}))}}]),n}(r.a.Component),Se=!1;function we(e,t){be[e]=t;var n=JSON.stringify(be);P.set("ui-settings",n,!0),ee("settings",be)}function Ee(){return function(){if(!Se){Se=!0;try{if(!(be=JSON.parse(P.get("ui-settings",!0))))throw new Error("no settings")}catch(e){be={layout:window.screen.width<540||window.screen.height<540?3:0}}}}(),be}function je(e){te("settings",e)}function ke(e){ne("settings",e)}Q("settings",be);var ze=(new _.a).compile({type:"object",properties:{"sizes:":{type:"array",items:{type:"number"}}},required:["sizes"]}),Oe=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).onSetSizes=function(e){a.setState({sizes:e}),we(a.kUIStateKey,a.state)},a.handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.files=new Map,a.fileToKeyMap=new Map,a.kUIStateKey="".concat(e.uiStateKey,"-files");var r=Ee()[a.kUIStateKey];return a.state=ze(r)?r:{sizes:[]},a.state.sizes.length!==e.data.files.length&&(a.state.sizes=e.data.files.map((function(t,n){return 1/e.data.files.length}))),a}return Object(h.a)(n,[{key:"getFileKey",value:function(e){var t=this.fileToKeyMap.get(e);return t||(t="".concat(Date.now(),"+").concat(Math.random()),this.fileToKeyMap.set(e,t)),t}},{key:"componentDidMount",value:function(){var e=this;(0,this.props.registerAPI)({goToLine:function(t){e.files.forEach((function(e){e.goToLine(t)}))}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.hackKey,a=t.data,i=t.extra,s=t.direction,o=this.state.sizes;return r.a.createElement("div",{className:"codes"},r.a.createElement(q.a,{direction:s,minSize:0,sizes:o,onSetSizes:this.onSetSizes,computeNewSizesFn:H.moveGuttersComputeNewSizes},a.files.map((function(t,a){return r.a.createElement(ye,{key:"ca".concat(e.getFileKey(t)),hackKey:n,desc:"filename",title:t.name,value:t.content,onTitleChange:function(e){return ce(a,e)},onValueChange:function(e){return le(a,e)},register:e.handleRegister,unregister:e.handleUnregister,extra:i})}))))}}]),n}(r.a.Component),Ce=n(17);EventTarget;var xe=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleChange=function(){a.forceUpdate()},a.logMessagesRef=r.a.createRef(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.context.logManager.addEventListener("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){this.context.logManager.removeEventListener("change",this.handleChange)}},{key:"componentDidUpdate",value:function(e,t,n){if(null!==n&&n<1){var a=this.logMessagesRef.current;a.scrollTop=a.scrollHeight-a.parentElement.clientHeight}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){var n=this.logMessagesRef.current;return n.scrollHeight-(n.scrollTop+n.parentElement.clientHeight)}},{key:"render",value:function(){var e=this.props.onGoToLine,t=this.context.logManager;return r.a.createElement("div",{className:"logger"},r.a.createElement("div",{className:"log-messages layout-scrollbar",ref:this.logMessagesRef},t.getMsgs().map((function(t,n){var a=!t.section;return r.a.createElement("div",{className:pe("log-line",Object(Ce.a)({},t.type,!0)),key:"l".concat(n)},r.a.createElement("div",{className:t.count?"count":"no-count"},t.count?t.count:""),r.a.createElement("div",{className:"msg"},t.msg,r.a.createElement("span",null,"\xa0")," ",r.a.createElement("div",{className:pe("file",{tooltip:a,fileLink:t.section}),onClick:function(){return e(t)},"data-tooltip":"".concat(t.section||t.url,":").concat(t.lineNo)},t.section||function(e){var t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e}(t.url||""),":",t.lineNo)))}))))}}]),n}(r.a.Component);xe.contextType=E;var Me=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleJSLog=function(e){a.context.logManager.addMsg(e)},a.handleJSError=function(e){a.context.logManager.addMsg(Object(v.a)(Object(v.a)({},e),{},{type:"error",showStack:!0}))},a.handleJSUnhandledRejection=function(e){a.context.logManager.addMsg(Object(v.a)(Object(v.a)({},e),{},{type:"error",showStack:!0}))},a.handleInfoMessages=function(e){a.context.logManager.addMsgs(e)},a.handleGimmeDaCodez=function(){a.iframe.contentWindow.postMessage({type:"run",data:a.data},"*")},a.handleMessage=function(e){var t=e.data,n=t.type,r=t.data,i=a.handlers[n];i&&i(r)},a.runnerRef=r.a.createRef(),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.registerAPI)({run:function(t,n){e.data=t,e.removeIFrame();var a=document.createElement("iframe");e.iframe=a,a.src=k("https://jsgistrunner.devcomments.org/runner-03.html",{url:"https://jsgist.org/jsgist-runner.js"}),n&&(a.style.background="none"),e.runnerRef.current.appendChild(a)}}),x("gimmeDaCodez",null,this.handleGimmeDaCodez),x("jsLog",null,this.handleJSLog),x("jsError",null,this.handleJSError),x("jsUnhandledRejection",null,this.handleJSUnhandledRejection),x("infoMessages",null,this.handleInfoMessages)}},{key:"removeIFrame",value:function(){this.iframe&&(this.iframe.remove(),this.iframe.src="about:blank",this.iframe=void 0)}},{key:"componentWillUnmount",value:function(){this.removeIFrame(),M("gimmeDaCodez",null,this.handleGimmeDaCodez),M("jsLog",null,this.handleJSLog),M("jsError",null,this.handleJSError),M("jsUnhandledRejection",null,this.handleJSUnhandledRejection),M("infoMessages",null,this.handleInfoMessages)}},{key:"render",value:function(){return r.a.createElement("div",{className:"runner",ref:this.runnerRef})}}]),n}(r.a.Component);Me.contextType=E;var Ne=(new _.a).compile({type:"object",properties:{"hSizes:":{type:"array",items:{type:"number"},minItems:2},"vSizes:":{type:"array",items:{type:"number"},minItems:2}},required:["hSizes","vSizes"]}),Le=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).onSetVSizes=function(e){a.setState({vSizes:e}),we("layout3Vertical",a.state)},a.onSetHSizes=function(e){a.setState({hSizes:e}),we("layout3Vertical",a.state)},a.registerFilesAPI=function(e){a.filesAPI=e},a.handleGoToLine=function(e){a.filesAPI.goToLine(e)};var r=Ee().layout3Vertical;return a.state=Ne(r)?r:{hSizes:[.5,.5],vSizes:[.9,.1]},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI,i=this.state,s=i.vSizes,o=i.hSizes;return r.a.createElement(q.a,{direction:"horizontal",minSize:0,sizes:o,onSetSizes:this.onSetHSizes},r.a.createElement("div",{className:"left"},r.a.createElement(Oe,{direction:"vertical",uiStateKey:"layout3Vertical",data:n,hackKey:t,registerAPI:this.registerFilesAPI})),r.a.createElement("div",{className:"right"},r.a.createElement(q.a,{direction:"vertical",minSize:0,sizes:s,onSetSizes:this.onSetVSizes},r.a.createElement(Me,{registerAPI:a}),r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component),Ie=(new _.a).compile({type:"object",properties:{"tSizes:":{type:"array",items:{type:"number"},minItems:2},"bSizes:":{type:"array",items:{type:"number"},minItems:2}},required:["tSizes","bSizes"]}),Re=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).onSetTSizes=function(e){a.setState({tSizes:e}),we("layout3Horizontal",a.state)},a.onSetBSizes=function(e){a.setState({bSizes:e}),we("layout3Horizontal",a.state)},a.registerFilesAPI=function(e){a.filesAPI=e},a.handleGoToLine=function(e){a.filesAPI.goToLine(e)};var r=Ee().layout3Horizontal;return a.state=Ie(r)?r:{tSizes:[.5,.5],bSizes:[.9,.1]},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI,i=this.state,s=i.tSizes,o=i.bSizes;return r.a.createElement(q.a,{direction:"vertical",minSize:0,sizes:s,onSetSizes:this.onSetTSizes},r.a.createElement("div",{className:"layout-3-horizontal-top"},r.a.createElement(Oe,{uiStateKey:"layout3Horizontal",direction:"horizontal",data:n,hackKey:t,registerAPI:this.registerFilesAPI})),r.a.createElement("div",{className:"layout-3-horizontal-bottom"},r.a.createElement(q.a,{direction:"vertical",sizes:o,onSetSizes:this.onSetBSizes},r.a.createElement(Me,{registerAPI:a}),r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component);function Te(e,t){var n,a=Object(z.a)(t);try{var r=function(){var t=n.value,a=e.findIndex((function(e){return e.name.toLowerCase().endsWith(t.toLowerCase())}));if(a>=0)return{v:a}};for(a.s();!(n=a.n()).done;){var i=r();if("object"===typeof i)return i.v}}catch(s){a.e(s)}finally{a.f()}return-1}function Ue(e,t){var n=e.findIndex((function(e){return e.name.toLowerCase()===t.toLowerCase}));if(n>=0)return n;for(var a=arguments.length,r=new Array(a>2?a-2:0),i=2;i<a;i++)r[i-2]=arguments[i];return Te(e,r)}var Ke=(new _.a).compile({type:"object",properties:{"hSizes:":{type:"array",items:{type:"number"},minItems:2},"v1Sizes:":{type:"array",items:{type:"number"},minItems:2},"v2Sizes:":{type:"array",items:{type:"number"},minItems:2}},required:["hSizes","v1Sizes","v2Sizes"]});function Pe(e){var t=e.data,n=e.ndx,a=e.hackKey,i=e.register,s=e.unregister,o=t.files[n];return r.a.createElement(ye,{hackKey:a,desc:"filename",title:o.name,value:o.content,onTitleChange:function(e){return ce(n,e)},onValueChange:function(e){return le(n,e)},register:i,unregister:s})}var Ae=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).onSetHSizes=function(e){a.setState({hSizes:e}),we("layout2x2",a.state)},a.onSetV1Sizes=function(e){a.setState({v1Sizes:e}),we("layout2x2",a.state)},a.onSetV2Sizes=function(e){a.setState({v2Sizes:e}),we("layout2x2",a.state)},a.handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.handleGoToLine=function(e){a.files.forEach((function(t){t.goToLine(e)}))},a.files=new Map;var r=Ee().layout2x2;return a.state=Ke(r)?r:{hSizes:[.5,.5],v1Sizes:[.4,.6],v2Sizes:[.4,.5,.1]},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hackKey,n=e.data,a=e.registerRunnerAPI,i=n.files,s=Ue(i,"index.html","html"),o=Ue(i,"index.js","js","js","javascript"),c=Ue(i,"index.css","css"),l=this.state,u=l.hSizes,d=l.v1Sizes,h=l.v2Sizes;return r.a.createElement(q.a,{direction:"horizontal",minSize:0,sizes:u,onSetSizes:this.onSetHSizes},r.a.createElement("div",{className:"left"},r.a.createElement(q.a,{direction:"vertical",minSize:0,sizes:d,onSetSizes:this.onSetV1Sizes},r.a.createElement(Pe,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:s}),r.a.createElement(Pe,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:o}))),r.a.createElement("div",{className:"right"},r.a.createElement(q.a,{direction:"vertical",minSize:0,sizes:h,onSetSizes:this.onSetV2Sizes},r.a.createElement(Pe,{hackKey:t,register:this.handleRegister,unregister:this.handleUnregister,data:n,ndx:c}),r.a.createElement(Me,{registerAPI:a}),r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component),De=(new _.a).compile({type:"object",properties:{showResult:{type:"boolean"},showLog:{type:"boolean"},currentNdx:{type:"integer"},"sizes:":{type:"array",items:{type:"number"},minItems:3},"lastSizes:":{type:"array",items:{type:"number"},minItems:3}},required:["sizes","lastSizes","showResult","showLog","currentNdx"]});function Ge(e,t,n,a){if(a){var r=t[n],i=1-r,s=e.filter((function(e,t){return n!==t})),o=s.reduce((function(e,t){return e+t}),0),c=s.map((function(e){return e/o*i}));return c.splice(n,0,r),c}var l=e.map((function(e,t){return n===t?0:e})),u=l.reduce((function(e,t){return e+t}),0);return l.map((function(e){return e/u}))}var Ve=[Le,Re,Ae,function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).handleRegister=function(e,t){a.files.set(e,t)},a.handleUnregister=function(e){a.files.delete(e)},a.setSizes=function(e){var t=a.state.lastSizes.slice();a.state.currentNdx>=0&&(t[0]=e[0]),a.state.showResult&&(t[1]=e[1]),a.state.showLow&&(t[2]=e[2]),a.setState({sizes:e,lastSizes:t}),we("layoutTabbed",a.state)},a.handleGoToLine=function(e){a.files.forEach((function(t,n){if(t.goToLine(e)){var r=a.props.data.files.findIndex((function(t){return t.name===e.section}));r!==a.state.currentNdx&&a.handleOnChange(r)}}))},a.handleOnChange=function(e){var t=a.state.currentNdx===e?-1:e;a.setState({currentNdx:t,sizes:Ge(a.state.sizes,a.state.lastSizes,0,t>=0)}),we("layoutTabbed",a.state)},a.toggleShowLog=function(){var e=!a.state.showLog;a.setState({showLog:e,sizes:Ge(a.state.sizes,a.state.lastSizes,2,e)}),we("layoutTabbed",a.state)},a.toggleShowResult=function(){var e=!a.state.showResult;a.setState({showResult:e,sizes:Ge(a.state.sizes,a.state.lastSizes,1,e)}),we("layoutTabbed",a.state)};var r=Ee().layoutTabbed;return a.state=De(r)?r:{showResult:!0,showLog:!0,currentNdx:2,sizes:[.45,.45,.1],lastSizes:[.45,.45,.1]},a.files=new Map,a.fileToKeyMap=new Map,a}return Object(h.a)(n,[{key:"getFileKey",value:function(e){var t=this.fileToKeyMap.get(e);return t||(t="".concat(Date.now(),"-").concat(Math.random()),this.fileToKeyMap.set(e,t)),t}},{key:"componentDidUpdate",value:function(){this.previousNdx!==this.state.currentNdx&&(this.previousNdx=this.state.currentNdx,this.files.forEach((function(e){e.refresh(),e.focus()})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.hackKey,a=t.data,i=t.registerRunnerAPI,s=this.state,o=s.showResult,c=s.showLog,l=s.sizes,u=s.currentNdx,d=Object(v.a)({},!o&&{display:"none"}),h=Object(v.a)({},!c&&{display:"none"});return r.a.createElement("div",{className:"layout-tabbed"},r.a.createElement("div",{className:"layout-tabbed-top"},r.a.createElement("div",{className:"tab-tabs"},a.files.map((function(t,n){var a="ca".concat(e.getFileKey(t));return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("input",{type:"radio",name:"tabbed-files",id:a,checked:n===u,onClick:function(t){return e.handleOnChange(n)},onChange:function(e){return e}}),r.a.createElement("label",{htmlFor:a},t.name))})),r.a.createElement("input",{type:"checkbox",checked:o,onChange:this.toggleShowResult,id:"result"}),r.a.createElement("label",{htmlFor:"result"},"result"),r.a.createElement("input",{type:"checkbox",checked:c,onChange:this.toggleShowLog,id:"log"}),r.a.createElement("label",{htmlFor:"log"},"log"))),r.a.createElement(q.a,{direction:"vertical",minSize:0,sizes:l,onSetSizes:this.setSizes},r.a.createElement("div",{className:"tab-content"},a.files.map((function(t,a){var i="ca".concat(e.getFileKey(t));return r.a.createElement("div",{key:i,style:Object(v.a)({},a!==u&&{display:"none"})},r.a.createElement(ye,{hackKey:n,desc:"filename",title:t.name,value:t.content,onTitleChange:function(e){return ce(a,e)},onValueChange:function(e){return le(a,e)},register:e.handleRegister,unregister:e.handleUnregister}))}))),r.a.createElement("div",{className:"layout-tabbed-result",style:d},r.a.createElement(Me,{registerAPI:i})),r.a.createElement("div",{className:"layout-tabbed-log",style:h},r.a.createElement(xe,{onGoToLine:this.handleGoToLine}))))}}]),n}(r.a.Component)],Fe=(r.a.Component,{type:"object",properties:{name:{type:"string"},date:{type:"string"}},required:["name","date"]}),Je={$schema:"http://json-schema.org/schema#",type:"object",additionalProperties:Fe},We=new _.a,_e=We.compile(Je),He=We.compile(Fe);function qe(){try{var e=JSON.parse(P.get("gists"));if(!_e(e))throw P.delete("gists"),new Error;return e}catch(t){return{}}}function Be(e){var t=Object(v.a)({},X("gists"));delete t[e],ee("gists",t),$e(t)}function $e(e){P.set("gists",JSON.stringify(e))}function Ye(e){if(!_e(e))throw new Error("gists not valid:\n".concat(He.errors.map((function(e){return"".concat(e.message,": ").concat(e.dataPath)}))));ee("gists",e),$e(e)}function Ze(e,t,n,a){var r="down"===a?1:-1,i=function(e,t){switch(e){case"name":return function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0};case"date":return function(e,t){return e.date<t.date?-1:e.date>t.date?1:0};case"public":return function(e,t){var n=e.public?1:0,a=t.public?1:0;return Math.sign(n-a)};case"check":return function(e,n){var a=t.has(e.id)?1:0,r=t.has(n.id)?1:0;return Math.sign(a-r)};default:throw new Error("unknown sortKey")}}(n,t);return console.log("sortDir:",r),Object.entries(e).map((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];return{id:n,name:a.name,date:a.date,public:a.public}})).sort((function(e,t){return i(t,e)*r}))}function Qe(e){var t=e.sortDir,n=e.selected,a=e.update;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(){return a(n?"up"===t?"down":"up":t)},className:n?"current-sort-key":""},"up"===t?"\u25b2":"\u25bc"))}Q("gists",qe()),P.subscribe("gists",(function(){ee("gists",qe())}));var Xe=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).handleNewGists=function(e){a.setState({gists:e})},a.toggleCheck=function(e){var t=new Set(a.state.checks);t.has(e)?t.delete(e):t.add(e),a.setState({checks:t})},a.onUserStatusChange=function(){a.forceUpdate(),a.context.userManager.getUserData()&&a.loadGists()},a.updateSort=function(e,t){console.log("update:",e,t),a.setState({sortDir:t,sortKey:e})},a.loadGists=Object(l.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.context,n=t.addError,r=t.github,a.setState({loading:!0}),e.prev=2,e.next=5,r.getUserGists();case 5:i=e.sent,Ye(i.reduce((function(e,t){return e[t.id]={name:t.description,date:t.updated_at,public:t.public},e}),{})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n("could not load gists: ".concat(e.t0));case 13:a.setState({loading:!1});case 14:case"end":return e.stop()}}),e,null,[[2,10]])}))),a.deleteSelected=Object(l.a)(c.a.mark((function e(){var t,n,r,i,s,o,l,u,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.state,n=t.checks,r=t.gists,i=[],n.forEach((function(e,t){r[e]&&i.push(e)})),s=a.context,o=s.addError,l=s.github,a.setState({loading:!0}),u=0,d=i;case 6:if(!(u<d.length)){e.next=20;break}return h=d[u],e.prev=8,e.next=11,l.deleteGist(h);case 11:Be(h),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),o("could not delete gist: ".concat(h,": ").concat(e.t0));case 17:u++,e.next=6;break;case 20:a.setState({loading:!1});case 21:case"end":return e.stop()}}),e,null,[[8,14]])}))),a.clearBackup=function(){a.context.backupManager.clearBackup()};var r=X("gists");return a.state={loading:!1,gists:r,checks:new Set,filter:"",sortKey:"date",sortDir:"down"},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this.context.userManager;te("gists",this.handleNewGists),e.subscribe(this.onUserStatusChange)}},{key:"componentWillUnmount",value:function(){var e=this.context.userManager;ne("gists",this.handleNewGists),e.unsubscribe(this.onUserStatusChange)}},{key:"renderLogin",value:function(){var e=this.context.userManager;return r.a.createElement("div",null,r.a.createElement("button",{onClick:e.login},"Login with github"))}},{key:"renderLoad",value:function(){var e=this,t=this.context.userManager,n=this.state,a=n.gists,i=n.checks,s=n.loading,o=n.filter,c=n.sortKey,l=n.sortDir,u=!!t.getUserData()&&!s,d=Ze(a,i,c,l);return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("button",{className:pe({disabled:!u}),onClick:this.loadGists},d.length?"Reload":"Load"," Your Gists")),d.length>=0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement(p,{className:"foobar",placeholder:"search:",value:o,onChange:function(t){e.setState({filter:t})}})),r.a.createElement("div",{className:"gists"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(Qe,{selected:"check"===c,sortDir:l,update:function(t){return e.updateSort("check",t)}})),r.a.createElement("th",null,r.a.createElement(Qe,{selected:"name"===c,sortDir:l,update:function(t){return e.updateSort("name",t)}})),r.a.createElement("th",null,r.a.createElement(Qe,{selected:"date"===c,sortDir:l,update:function(t){return e.updateSort("date",t)}})),r.a.createElement("th",null,r.a.createElement(Qe,{selected:"public"===c,sortDir:l,update:function(t){return e.updateSort("public",t)}})))),r.a.createElement("tbody",null,d.filter(function(e){return e=e.trim().toLowerCase(),function(t){var n=t.name,a=t.date;return""===e||n.toLowerCase().includes(e)||a.substring(0,10).includes(e)}}(o)).map((function(t,n){return r.a.createElement("tr",{key:"g".concat(n)},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",id:"gc".concat(n),checked:i.has(t.id),onChange:function(){return e.toggleCheck(t.id)}}),r.a.createElement("label",{htmlFor:"gc".concat(n)})),r.a.createElement("td",null,r.a.createElement("a",{onClick:e.clearBackup,href:"".concat(window.location.origin,"?src=").concat(encodeURIComponent(t.id))},t.name)),r.a.createElement("td",null,t.date.substring(0,10)),r.a.createElement("td",null,t.public?"":"\ud83d\udd12"))}))))),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.deleteSelected},"Delete Selected Gists"))))}},{key:"render",value:function(){return this.context.userManager.getUserData()?this.renderLoad():this.renderLogin()}}]),n}(r.a.Component);Xe.contextType=E;n(50),n(52),new TextEncoder,new TextDecoder;throw Error("must set environment variable: OAUTH_HELPER_URL")},80:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/schema#","type":"object","properties":{"name":{"type":"string"},"settings":{"type":"object"},"files":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"content":{"type":"string"}},"required":["content","name"]}}},"required":["name","settings","files"]}')},82:function(e,t,n){e.exports=n.p+"static/media/vertical-layout.f248a432.svg"},83:function(e,t,n){e.exports=n.p+"static/media/horizontal-layout.e3f3298b.svg"},84:function(e,t,n){e.exports=n.p+"static/media/two-by-two-layout.23605ce8.svg"},85:function(e,t,n){e.exports=n.p+"static/media/tabbed-layout.8a8b9bc8.svg"},86:function(e,t,n){e.exports=n(177)},91:function(e,t,n){},92:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.b892e844.chunk.js.map